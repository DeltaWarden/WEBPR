{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useTags } from './index.js';\nimport api from '../api';\nexport default function useRecipes() {\n  _s();\n  const [recipes, setRecipes] = useState([]);\n  const [recipesCount, setRecipesCount] = useState(0);\n  const [recipesPage, setRecipesPage] = useState(1);\n  const {\n    value: tagsValue,\n    handleChange: handleTagsChange,\n    setValue: setTagsValue\n  } = useTags();\n  const handleLike = ({\n    id,\n    toLike = true\n  }) => {\n    const method = toLike ? api.addToFavorites.bind(api) : api.removeFromFavorites.bind(api);\n    method({\n      id\n    }).then(res => {\n      const recipesUpdated = recipes.map(recipe => {\n        if (recipe.id === id) {\n          recipe.is_favorited = toLike;\n        }\n        return recipe;\n      });\n      setRecipes(recipesUpdated);\n    }).catch(err => {\n      const {\n        errors\n      } = err;\n      if (errors) {\n        alert(errors);\n      }\n    });\n  };\n  const handleAddToCart = ({\n    id,\n    toAdd = true,\n    callback\n  }) => {\n    const method = toAdd ? api.addToOrders.bind(api) : api.removeFromOrders.bind(api);\n    method({\n      id\n    }).then(res => {\n      const recipesUpdated = recipes.map(recipe => {\n        if (recipe.id === id) {\n          recipe.is_in_shopping_cart = toAdd;\n        }\n        return recipe;\n      });\n      setRecipes(recipesUpdated);\n      callback && callback(toAdd);\n    }).catch(err => {\n      const {\n        errors\n      } = err;\n      if (errors) {\n        alert(errors);\n      }\n    });\n  };\n  return {\n    recipes,\n    setRecipes,\n    recipesCount,\n    setRecipesCount,\n    recipesPage,\n    setRecipesPage,\n    tagsValue,\n    handleLike,\n    handleAddToCart,\n    handleTagsChange,\n    setTagsValue\n  };\n}\n_s(useRecipes, \"UehhVNkQakNZjV6Gzc9HmAqC1v0=\", false, function () {\n  return [useTags];\n});","map":{"version":3,"names":["React","useState","useTags","api","useRecipes","_s","recipes","setRecipes","recipesCount","setRecipesCount","recipesPage","setRecipesPage","value","tagsValue","handleChange","handleTagsChange","setValue","setTagsValue","handleLike","id","toLike","method","addToFavorites","bind","removeFromFavorites","then","res","recipesUpdated","map","recipe","is_favorited","catch","err","errors","alert","handleAddToCart","toAdd","callback","addToOrders","removeFromOrders","is_in_shopping_cart"],"sources":["C:/Users/delta/Desktop/V2-HAKATON-main/frontend/src/utils/use-recipes.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useTags } from './index.js'\nimport api from '../api'\n\nexport default function useRecipes () {\n  const [ recipes, setRecipes ] = useState([])\n  const [ recipesCount, setRecipesCount ] = useState(0)\n  const [ recipesPage, setRecipesPage ] = useState(1)\n  const { value: tagsValue, handleChange: handleTagsChange, setValue: setTagsValue } = useTags()\n\n  const handleLike = ({ id, toLike = true }) => {\n    const method = toLike ? api.addToFavorites.bind(api) : api.removeFromFavorites.bind(api)\n    method({ id }).then(res => {\n      const recipesUpdated = recipes.map(recipe => {\n        if (recipe.id === id) {\n          recipe.is_favorited = toLike\n        }\n        return recipe\n      })\n      setRecipes(recipesUpdated)\n    })\n    .catch(err => {\n      const { errors } = err\n      if (errors) {\n        alert(errors)\n      }\n    })\n  }\n\n  const handleAddToCart = ({ id, toAdd = true, callback }) => {\n    const method = toAdd ? api.addToOrders.bind(api) : api.removeFromOrders.bind(api)\n    method({ id }).then(res => {\n      const recipesUpdated = recipes.map(recipe => {\n        if (recipe.id === id) {\n          recipe.is_in_shopping_cart = toAdd\n        }\n        return recipe\n      })\n      setRecipes(recipesUpdated)\n      callback && callback(toAdd)\n    })\n    .catch(err => {\n      const { errors } = err\n      if (errors) {\n        alert(errors)\n      }\n    })\n  }\n\n  return {\n    recipes,\n    setRecipes,\n    recipesCount,\n    setRecipesCount,\n    recipesPage,\n    setRecipesPage,\n    tagsValue,\n    handleLike,\n    handleAddToCart,\n    handleTagsChange,\n    setTagsValue\n  }\n}\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,OAAO,QAAQ,YAAY;AACpC,OAAOC,GAAG,MAAM,QAAQ;AAExB,eAAe,SAASC,UAAUA,CAAA,EAAI;EAAAC,EAAA;EACpC,MAAM,CAAEC,OAAO,EAAEC,UAAU,CAAE,GAAGN,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAAEO,YAAY,EAAEC,eAAe,CAAE,GAAGR,QAAQ,CAAC,CAAC,CAAC;EACrD,MAAM,CAAES,WAAW,EAAEC,cAAc,CAAE,GAAGV,QAAQ,CAAC,CAAC,CAAC;EACnD,MAAM;IAAEW,KAAK,EAAEC,SAAS;IAAEC,YAAY,EAAEC,gBAAgB;IAAEC,QAAQ,EAAEC;EAAa,CAAC,GAAGf,OAAO,CAAC,CAAC;EAE9F,MAAMgB,UAAU,GAAGA,CAAC;IAAEC,EAAE;IAAEC,MAAM,GAAG;EAAK,CAAC,KAAK;IAC5C,MAAMC,MAAM,GAAGD,MAAM,GAAGjB,GAAG,CAACmB,cAAc,CAACC,IAAI,CAACpB,GAAG,CAAC,GAAGA,GAAG,CAACqB,mBAAmB,CAACD,IAAI,CAACpB,GAAG,CAAC;IACxFkB,MAAM,CAAC;MAAEF;IAAG,CAAC,CAAC,CAACM,IAAI,CAACC,GAAG,IAAI;MACzB,MAAMC,cAAc,GAAGrB,OAAO,CAACsB,GAAG,CAACC,MAAM,IAAI;QAC3C,IAAIA,MAAM,CAACV,EAAE,KAAKA,EAAE,EAAE;UACpBU,MAAM,CAACC,YAAY,GAAGV,MAAM;QAC9B;QACA,OAAOS,MAAM;MACf,CAAC,CAAC;MACFtB,UAAU,CAACoB,cAAc,CAAC;IAC5B,CAAC,CAAC,CACDI,KAAK,CAACC,GAAG,IAAI;MACZ,MAAM;QAAEC;MAAO,CAAC,GAAGD,GAAG;MACtB,IAAIC,MAAM,EAAE;QACVC,KAAK,CAACD,MAAM,CAAC;MACf;IACF,CAAC,CAAC;EACJ,CAAC;EAED,MAAME,eAAe,GAAGA,CAAC;IAAEhB,EAAE;IAAEiB,KAAK,GAAG,IAAI;IAAEC;EAAS,CAAC,KAAK;IAC1D,MAAMhB,MAAM,GAAGe,KAAK,GAAGjC,GAAG,CAACmC,WAAW,CAACf,IAAI,CAACpB,GAAG,CAAC,GAAGA,GAAG,CAACoC,gBAAgB,CAAChB,IAAI,CAACpB,GAAG,CAAC;IACjFkB,MAAM,CAAC;MAAEF;IAAG,CAAC,CAAC,CAACM,IAAI,CAACC,GAAG,IAAI;MACzB,MAAMC,cAAc,GAAGrB,OAAO,CAACsB,GAAG,CAACC,MAAM,IAAI;QAC3C,IAAIA,MAAM,CAACV,EAAE,KAAKA,EAAE,EAAE;UACpBU,MAAM,CAACW,mBAAmB,GAAGJ,KAAK;QACpC;QACA,OAAOP,MAAM;MACf,CAAC,CAAC;MACFtB,UAAU,CAACoB,cAAc,CAAC;MAC1BU,QAAQ,IAAIA,QAAQ,CAACD,KAAK,CAAC;IAC7B,CAAC,CAAC,CACDL,KAAK,CAACC,GAAG,IAAI;MACZ,MAAM;QAAEC;MAAO,CAAC,GAAGD,GAAG;MACtB,IAAIC,MAAM,EAAE;QACVC,KAAK,CAACD,MAAM,CAAC;MACf;IACF,CAAC,CAAC;EACJ,CAAC;EAED,OAAO;IACL3B,OAAO;IACPC,UAAU;IACVC,YAAY;IACZC,eAAe;IACfC,WAAW;IACXC,cAAc;IACdE,SAAS;IACTK,UAAU;IACViB,eAAe;IACfpB,gBAAgB;IAChBE;EACF,CAAC;AACH;AAACZ,EAAA,CA1DuBD,UAAU;EAAA,QAIqDF,OAAO;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}